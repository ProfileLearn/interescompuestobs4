import{interes,render,numAjustado,teayt,rendimiento}from"./utils/calcMethods.min.js";import{dotFormat,textToNumObject}from"./utils/parser.min.js";import{obtainDomValues,tooltipHandler,handleViewMore,clear,inputHandler}from"./utils/eventsHandlers.min.js";const primaryDomObject={tna:document.getElementById("tnaIn"),montoInicial:document.getElementById("inicialIn"),plazo:document.getElementById("plazoIn"),ciclos:document.getElementById("ciclosIn"),adicional:document.getElementById("adicionalIn"),inflacion:document.getElementById("inflacionIn")};const secDomObject={appForm:document.getElementsByClassName("app")[0],advanceOptions:document.getElementById("advance-options"),viewMore:document.getElementById("ver-mas"),calculate:document.getElementById("calcular"),clear:document.getElementById("clear")};const thrDomObject={resultado:document.getElementById("resultadoIn"),resultadoNeto:document.getElementById("resultadoNeto"),resultadoCiclo:document.getElementById("resultadoCiclo")};const porcentajes={};function calHandleClick(){const e=obtainDomValues(primaryDomObject);const t=textToNumObject(e);const o=t.inflacion;porcentajes.tasasEfectivas=teayt(t.tna,t.plazo,t.ciclos);porcentajes.rendimientoInversion=rendimiento(t.inflacion,porcentajes.tasasEfectivas.tet).toFixed(2);porcentajes.tasasEfectivas.tea=porcentajes.tasasEfectivas.tea.toFixed(2);porcentajes.tasasEfectivas.tet=porcentajes.tasasEfectivas.tet.toFixed(2);let a=interes(t);a=numAjustado(o,a);let c=a.toFixed(2);c=dotFormat(c);const n=t.montoInicial;const i=t.tna;const l=t.plazo;const s=interes({montoInicial:a,tna:i,plazo:l,ciclos:1,adicional:0});const r=s-a;let d=r.toFixed(2);d=dotFormat(d);const m=a-n;let p=m.toFixed(2);p=dotFormat(p);render(thrDomObject.resultado,c);render(thrDomObject.resultadoNeto,p);render(thrDomObject.resultadoCiclo,d)}secDomObject.appForm.addEventListener("input",inputHandler);secDomObject.appForm.addEventListener("click",tooltipHandler);secDomObject.advanceOptions.addEventListener("change",e=>{primaryDomObject.inflacion.value="";if(!e.target.checked){resultadoCiclo.parentNode.parentNode.classList.add("oculto");primaryDomObject.inflacion.parentNode.parentNode.classList.add("oculto");secDomObject.viewMore.parentNode.parentNode.classList.add("oculto");if(primaryDomObject.tna.value&&primaryDomObject.plazo.value&&primaryDomObject.ciclos.value&&primaryDomObject.montoInicial.value){const t=new Event("click");secDomObject.calculate.dispatchEvent(t)}}else{resultadoCiclo.parentNode.parentNode.classList.remove("oculto");primaryDomObject.inflacion.parentNode.parentNode.classList.remove("oculto");secDomObject.viewMore.parentNode.parentNode.classList.remove("oculto")}});secDomObject.viewMore.addEventListener("click",()=>handleViewMore(thrDomObject.resultado,porcentajes,primaryDomObject));secDomObject.calculate.addEventListener("click",calHandleClick);secDomObject.clear.addEventListener("click",()=>clear(primaryDomObject));