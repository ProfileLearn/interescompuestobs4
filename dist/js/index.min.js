import{interes,textToNumObject,obtainDomValues,clear,dotFormat,tooltipHandler,inputHandler,render,numAjustado,teayt,rendimiento,handleViewMore}from"./methods.min.js";const primaryDomObject={tna:document.getElementById("tnaIn"),montoInicial:document.getElementById("inicialIn"),plazo:document.getElementById("plazoIn"),ciclos:document.getElementById("ciclosIn"),adicional:document.getElementById("adicionalIn"),inflacion:document.getElementById("inflacionIn")};const secDomObject={appForm:document.getElementsByClassName("app")[0],advanceOptions:document.getElementById("advance-options"),viewMore:document.getElementById("ver-mas"),calculate:document.getElementById("calcular"),clear:document.getElementById("clear")};const thrDomObject={resultado:document.getElementById("resultadoIn"),resultadoNeto:document.getElementById("resultadoNeto"),resultadoCiclo:document.getElementById("resultadoCiclo")};export const tooltipsObject={tna:"Tasa Nominal Anual. Porcentaje de interés a 365 días, sin tocar la inversión",inicial:"Monto inicial a invertir",plazo:"Cantidad de días que dura el ciclo de inversión",ciclos:"Cantidad de ciclos en que se renueva la inversión",adicional:"Monto adicional que se agrega en cada ciclo",ita:"Inflación Total Acumulada al terminar el último ciclo (estimación)",resultado:"Monto total al finalizar el último ciclo",resultadoNeto:"Monto neto al finalizar el último ciclo (Resultado - Monto inicial)",resultadoCiclo:"Indica una proyección de cuál sería el Monto neto invirtiendo el Monto final (Resultado) después de 1 ciclo más",tea:"Tasa Efectiva Anual. Porcentaje de interés real basada en plazo y cantidad de ciclos proyectado a 365 días",tet:"Tasa Efectiva Total. Porcentaje de interés real al final de la inversión"};const porcentajes={};function calHandleClick(){const e=obtainDomValues(primaryDomObject);const t=textToNumObject(e);const a=t.inflacion;porcentajes.tasasEfectivas=teayt(t.tna,t.plazo,t.ciclos);porcentajes.rendimientoInversion=rendimiento(t.inflacion,porcentajes.tasasEfectivas.tet).toFixed(2);porcentajes.tasasEfectivas.tea=porcentajes.tasasEfectivas.tea.toFixed(2);porcentajes.tasasEfectivas.tet=porcentajes.tasasEfectivas.tet.toFixed(2);let o=interes(t);o=numAjustado(a,o);let n=o.toFixed(2);n=dotFormat(n);const c=t.montoInicial;const i=t.tna;const l=t.plazo;const s=interes({montoInicial:o,tna:i,plazo:l,ciclos:1,adicional:0});const r=s-o;let d=r.toFixed(2);d=dotFormat(d);const m=o-c;let u=m.toFixed(2);u=dotFormat(u);render(thrDomObject.resultado,n);render(thrDomObject.resultadoNeto,u);render(thrDomObject.resultadoCiclo,d)}secDomObject.appForm.addEventListener("input",inputHandler);secDomObject.appForm.addEventListener("click",tooltipHandler);secDomObject.advanceOptions.addEventListener("change",e=>{primaryDomObject.inflacion.value="";if(!e.target.checked){resultadoCiclo.parentNode.parentNode.classList.add("oculto");primaryDomObject.inflacion.parentNode.parentNode.classList.add("oculto");secDomObject.viewMore.parentNode.parentNode.classList.add("oculto");if(primaryDomObject.tna.value&&primaryDomObject.plazo.value&&primaryDomObject.ciclos.value&&primaryDomObject.montoInicial.value){const t=new Event("click");secDomObject.calculate.dispatchEvent(t)}}else{resultadoCiclo.parentNode.parentNode.classList.remove("oculto");primaryDomObject.inflacion.parentNode.parentNode.classList.remove("oculto");secDomObject.viewMore.parentNode.parentNode.classList.remove("oculto")}});secDomObject.viewMore.addEventListener("click",()=>handleViewMore(thrDomObject.resultado,porcentajes,primaryDomObject));secDomObject.calculate.addEventListener("click",calHandleClick);secDomObject.clear.addEventListener("click",()=>clear(primaryDomObject));